(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function l(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=l(r);fetch(r.href,n)}})();function $(){let c=[];const a=document.querySelector(".attendance__result--case"),l=document.querySelectorAll("main > article"),s=document.querySelectorAll(".menu__list > li"),r=[["テスト版リリース","勤怠アプリを作成しました。バグや要望はべべまでご連絡ください。","2024/12/09"]];function n(e){return e="0"+e,e.slice(-2)}function g(){const e=new Date;return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}T${n(e.getHours())}:${n(e.getMinutes())}`}function I(e){const t={"entry.175148690":e[0],"entry.2086331527":e[2],"entry.907702302":e[3],"entry.138870410":e[1]},o=axios.post("https://docs.google.com/forms/u/0/d/e/1FAIpQLSeiKbwc_kWGuYNragDHNyKBuqeFyg8dl5OClPua11N6HUUyTw/formResponse",t).then(()=>{console.log(o)}).catch(_=>{console.log("err:",_)})}function A(){if(document.querySelector(".landing").classList.add("js-on"),document.querySelectorAll("title, .header__title > .header__title-name").forEach(function(e){e.textContent="EMS勤怠"}),document.querySelector(".attendance__sendWrap").innerHTML='<button type="button" class="attendance__button attendance__button--send" disabled>勤怠を提出する</button>',h(),localStorage.getItem("VCRP__temp")){const e=localStorage.getItem("VCRP__temp");JSON.parse(e)[3]?S(2):S(1)}document.querySelector(".attendance__button--send").addEventListener("click",function(e){if(window.confirm("勤怠を送信します。よろしいですか？")){const o=JSON.parse(localStorage.getItem("VCRP__temp")),_=new Date(o[2]),d=_.getFullYear(),i=n(_.getMonth()+1);let u=localStorage.getItem("VCRP__record")?JSON.parse(localStorage.getItem("VCRP__record")):{};localStorage.getItem("VCRP__record")?(u[`${d}年${i}月`]||(u[`${d}年${i}月`]=[]),u[`${d}年${i}月`].push(o)):(u[`${d}年${i}月`]=[],u[`${d}年${i}月`][0]=o),I(o),localStorage.setItem("VCRP__record",JSON.stringify(u)),console.log(JSON.parse(localStorage.getItem("VCRP__record"))),b(),S(3)}}),r.forEach(function(e){const t=document.createElement("dt");e[2]?t.innerHTML=`<span>${e[0]}</span><time>${e[2]}</time>`:t.innerHTML=`<span>${e[0]}</span>`;const o=document.createElement("dd");o.innerHTML=`${e[1]}`,document.querySelector(".information__dl").appendChild(t),document.querySelector(".information__dl").appendChild(o)})}function h(){const e=localStorage.getItem("VCRP__name")?localStorage.getItem("VCRP__name"):"名無し";document.querySelector(".setting__name").value=e,document.querySelector(".time__name").textContent=`Hi, ${e}さん`}function b(){if(document.querySelector(".page__record").innerHTML="",localStorage.getItem("VCRP__record")){const e=JSON.parse(localStorage.getItem("VCRP__record"));Object.keys(e).forEach(function(t){const o=document.createElement("section");o.classList.add("box");const _=document.createElement("h2");_.textContent=t;const d=document.createElement("div");d.classList.add("tableWrap");const i=document.createElement("table");d.appendChild(i),o.appendChild(_),o.appendChild(d),document.querySelector(".page__record").appendChild(o),e[t].forEach(function(N){const C=document.createElement("tr");N.forEach(function(O){const v=document.createElement("td");v.textContent=O,C.appendChild(v)}),i.prepend(C)});const u=document.createElement("tr");u.innerHTML="<th>名前</th><th>事件対応数</th><th>出勤時間</th><th>退勤時間</th>",i.prepend(u)})}else{const e=document.createElement("section");e.classList.add("box");const t=document.createElement("h2");t.textContent="勤怠記録はまだありません",e.appendChild(t),document.querySelector(".page__record").appendChild(e)}}function R(){s.forEach(function(e,t){e.addEventListener("click",function(o){V(t)})})}function V(e){document.querySelector(".header__title-cat").textContent=s[e].querySelector("a").textContent,s.forEach(function(t){t.classList.remove("js-on")}),s[e].classList.add("js-on"),l.forEach(function(t){t.classList.remove("js-on")}),l[e].classList.add("js-on")}function q(){const e=new Date;c=[e.getFullYear(),n(e.getMonth()+1),n(e.getDate()),n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())],document.querySelector(".time__day").textContent=`${c[0]}年${c[1]}月${c[2]}日`,document.querySelector(".time__hhmm--hh").textContent=`${c[3]}`,document.querySelector(".time__hhmm--mm").textContent=`${c[4]}`,document.querySelector(".time__hhmm--ss").textContent=`${c[5]}`}function S(e){const t=JSON.parse(localStorage.getItem("VCRP__temp"));switch(document.querySelector(".attendance__button--begin").setAttribute("disabled","disabled"),document.querySelector(".attendance__button--finish").removeAttribute("disabled"),document.querySelector(".attendance__resultCaseWrap").classList.add("js-on"),document.querySelector(".attendance__resultStartWrap").classList.add("js-on"),document.querySelector(".attendance__result--start").value=t[2],document.querySelector(".attendance__result--case").value=t[1],e){case 1:break;case 2:document.querySelector(".attendance__button--finish").setAttribute("disabled","disabled"),document.querySelector(".attendance__button--send").removeAttribute("disabled"),document.querySelector(".attendance__resultFinishWrap").classList.add("js-on"),document.querySelector(".attendance__result--finish").value=t[3];break;case 3:document.querySelector(".attendance__button--send").setAttribute("disabled","disabled"),document.querySelector(".attendance__button--finish").setAttribute("disabled","disabled"),document.querySelector(".attendance__button--begin").removeAttribute("disabled"),document.querySelector(".attendance__resultStartWrap").classList.remove("js-on"),document.querySelector(".attendance__resultCaseWrap").classList.remove("js-on"),document.querySelector(".attendance__resultFinishWrap").classList.remove("js-on"),document.querySelector(".attendance__result--start").value="",document.querySelector(".attendance__result--case").value=0,document.querySelector(".attendance__result--finish").value="",localStorage.removeItem("VCRP__temp");break;default:console.log(e,t)}}function f(){const e=JSON.parse(localStorage.getItem("VCRP__temp"));e[1]=a.value,localStorage.setItem("VCRP__temp",JSON.stringify(e))}document.querySelector(".attendance__button--begin").addEventListener("click",function(e){const t=g(),o=[localStorage.getItem("VCRP__name"),"0",t];localStorage.setItem("VCRP__temp",JSON.stringify(o)),S(1)}),document.querySelector(".attendance__button--finish").addEventListener("click",function(e){const t=g();let o=JSON.parse(localStorage.getItem("VCRP__temp"));o[3]=t,localStorage.setItem("VCRP__temp",JSON.stringify(o)),S(2)}),a.addEventListener("change",function(e){f()}),document.querySelector(".attendance__result--casePlus").addEventListener("click",function(e){a.stepUp(),f()}),document.querySelector(".attendance__result--caseMinus").addEventListener("click",function(e){a.stepDown(),f()}),document.querySelector(".setting__name").addEventListener("change",function(e){if(localStorage.setItem("VCRP__name",this.value),localStorage.getItem("VCRP__temp")){const t=JSON.parse(localStorage.getItem("VCRP__temp"));t[0]=this.value,localStorage.setItem("VCRP__temp",JSON.stringify(t))}h()}),document.querySelector(".attendance__result--start").addEventListener("change",function(e){const t=JSON.parse(localStorage.getItem("VCRP__temp"));t[2]=this.value,localStorage.setItem("VCRP__temp",JSON.stringify(t))}),document.querySelector(".attendance__result--finish").addEventListener("change",function(e){const t=JSON.parse(localStorage.getItem("VCRP__temp"));t[3]=this.value,localStorage.setItem("VCRP__temp",JSON.stringify(t))}),A(),R(),b(),q(),setInterval(q,1e3)}const y=document.querySelector(".starting"),p=document.querySelector(".startingWrap"),m=document.querySelector(".starting__errorWrap");function j(){E(),setTimeout(function(){p.setAttribute("style","display: block;")},500)}async function L(c){const a=new TextEncoder().encode(c),l=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(l)).map(s=>s.toString(16).padStart(2,"0")).join("")}function E(){localStorage.getItem("VCRP__login")&&L(localStorage.getItem("VCRP__login")).then(c=>{c==="7c0a0a5d856698fc86b3d4328f6e0cec97047abe725b56c404d94d591e32ae17"&&P()})}function P(){$(),document.querySelector(".starting__button").setAttribute("disabled","disabled"),y.remove()}document.querySelector(".starting__button").addEventListener("click",function(c){E();let a=document.querySelector(".starting__input--pass").value;L(a).then(l=>{const s=document.querySelector(".starting__input--text").value;s===""&&l==="7c0a0a5d856698fc86b3d4328f6e0cec97047abe725b56c404d94d591e32ae17"?(console.log("name NG!"),m.querySelector("p:nth-of-type(1)").setAttribute("style","display: none;"),m.querySelector("p:nth-of-type(2)").setAttribute("style","display: block;"),p.classList.add("js-ng"),m.classList.add("js-ng")):l==="7c0a0a5d856698fc86b3d4328f6e0cec97047abe725b56c404d94d591e32ae17"?(console.log("OK!"),p.classList.add("js-ok"),y.addEventListener("animationend",()=>{P()}),y.classList.add("js-ok"),localStorage.setItem("VCRP__login",a),localStorage.setItem("VCRP__name",s)):(console.log("NG!"),m.querySelector("p:nth-of-type(2)").setAttribute("style","display: none;"),m.querySelector("p:nth-of-type(1)").setAttribute("style","display: block;"),p.classList.add("js-ng"),m.classList.add("js-ng"))}),c.preventDefault()});p.addEventListener("animationend",()=>{p.classList.remove("js-ng")});m.addEventListener("animationend",()=>{m.classList.remove("js-ng")});j();
